{% extends "admin-announcement.html" %}
{% load static %}

{% block announcementTableTabButton %}
<button class="nav-link active" id="nav-announcement-table-tab" onClick="window.location.href='{% url 'admin-announcement-table' %}'" data-bs-toggle="tab" data-bs-target="#nav-announcement-table" type="button" role="tab"
  aria-controls="nav-announcement-table-tab" aria-selected="false">
  <span class="iconify" data-icon="fa:table" data-width="20" data-height="20"></span>
</button>
{% endblock %}

{% block announcementTableTabContent %}

<div class="tab-pane fade active show" id="nav-announcement-table" role="tabpanel" aria-labelledby="nav-announcement-table-tab">

  <div class="d-flex align-items-center justify-content-center">
    <button type="submit" class="btn btn-sm update-btn ms-auto" onclick="window.location.href = '{% url 'admin-announcement-new' %}';"
      style="width: auto; border-radius: 7px; background-color: #112D4E; color: white; box-shadow: 0 0 1px 1px rgba(0, 0, 0, 0.5);">
      New
      <span class="iconify" data-icon="akar-icons:circle-plus" data-width="18" data-height="18"></span>
    </button>
  </div>

  <!-- table -->
  <div class="table-div m-4 mt-4 mb-4">
    <table class="table table-striped table-bordered" style="widows: 100%;" id="announcement-table">
      <thead>
        <tr>
          <th scope="col" class="px-2 py-1 text-center">From</th>
          <th scope="col" class="px-2 py-1 text-center">Status</th>
          <th scope="col" class="px-2 py-1 text-center">Date</th>
          <th scope="col" class="px-2 py-1 text-center">Time</th>
          <th scope="col" class="px-2 py-1 text-center">Title</th>
          <th scope="col" class="px-2 py-1 text-center">Description</th>
          {% comment %} <th scope="col" class="px-2 py-1 text-center">Actions</th> {% endcomment %}
        </tr>
      </thead>
      <tbody id="myTable">
        {% if receivers %}
        {% for receiver in receivers %}
        <tr>
          <th scope="row" class="px-2 py-1 text-center">
            {% if receiver.announcement.sender.is_superuser %}
            MPT Admin
            {% else %}
            {{receiver.announcement.sender.first_name}} {{receiver.announcement.sender.last_name}} 
            {% endif %}  
          </th>
          <td class="px-2 py-1 text-center">
            {% if receiver.announcement.sender.is_superuser and receiver.announcement.sender.is_staff  %}
              Admin
            {% else %}
              Teacher
            {% endif %}
            
          </td>
          <td class="px-2 py-1 text-center">{{receiver.announcement.date|date:"D d M Y" }}</td>
          <td class="px-2 py-1 text-center">{{receiver.announcement.date|time }}</td>
          <td class="px-2 py-1 text-center">{{receiver.announcement.title}}</td>
          <td class="px-2 py-1 text-center">{{receiver.announcement.content}} </td>
          {% comment %} note the link to delete announcement is not functional need to add that link {% endcomment %}
          {% comment %} <td class="px-2 py-1 text-center">
            <form action="{% url 'admin-delete-announcement' receiver.announcement.id %}" class="mb-0" style="display: inline-block" method='POST'>
              {% csrf_token %}
            <button type="submit" class="btn btn-sm btn-danger update-btn ms-auto" style="width: auto; border-radius: 7px; margin-left: 10px">
              Delete
            </button>
          </form>
          </td> {% endcomment %}
        </tr>
        {% endfor %}
        {% endif %}
      </tbody>
    </table>
  </div>

</div>
{% endblock %}
